/* WARNING: do not edit! */
/* Generated by Makefile from include/crypto/bn_conf.h.in */
/*
 * Copyright 2016-2021 The OpenSSL Project Authors. All Rights Reserved.
 *
 * Licensed under the Apache License 2.0 (the "License").  You may not use
 * this file except in compliance with the License.  You can obtain a copy
 * in the file LICENSE in the source distribution or at
 * https://www.openssl.org/source/license.html
 */

#ifndef OSSL_CRYPTO_BN_CONF_H
# define OSSL_CRYPTO_BN_CONF_H
# pragma once

/*
 * The contents of this file are not used in the UEFI build, as
 * both 32-bit and 64-bit builds are supported from a single run
 * of the Configure script.
 */

/* Should we define BN_DIV2W here? */

/* Only one for the following should be defined */

/*=====================================================================
 *  正确处理：Windows、Linux、macOS、*BSD、AIX、Solaris、iOS、Android
 *  x86_64、ARM64、RISC-V64、PowerPC64、MIPS64、s390x 等所有主流架构
 *====================================================================*/

#undef THIRTY_TWO_BIT
#undef SIXTY_FOUR_BIT
#undef SIXTY_FOUR_BIT_LONG

 /* ------------------- 1. Windows 平台（最明确） ------------------- */
#if defined(_WIN64)                                      /* MSVC x64 / ARM64 */
#   define SIXTY_FOUR_BIT
#   undef  SIXTY_FOUR_BIT_LONG
/* _WIN64 一定意味着 64 位，即使在未来的 Windows 上也是如此 */

#elif defined(_WIN32)                                    /* 32 位 Windows（已基本绝迹） */
#   define THIRTY_TWO_BIT
/* 不定义 SIXTY_FOUR_BIT 和 SIXTY_FOUR_BIT_LONG */

/* ------------------- 2. 非 Windows 的 64 位平台 ------------------- */
#elif defined(__x86_64__)     || defined(__x86_64) || \
      defined(__aarch64__)    || defined(_M_ARM64) || \
      defined(__powerpc64__)  || defined(__ppc64__) || \
      defined(__s390x__)      || \
      defined(__mips64)       || defined(__mips64__) || \
      defined(__riscv) && (__riscv_xlen == 64) || \
      defined(__sparc64__)    || defined(__ia64__) || \
      defined(__LP64__) && __LP64__                    /* LP64 或 LLP64 之外的变种保险 */

#   define SIXTY_FOUR_BIT_LONG   /* 所有类 Unix 64 位平台：long 就是 64 位 */
#   undef  SIXTY_FOUR_BIT

/* ------------------- 3. 兜底：32 位平台 ------------------- */
#else
    /* 包括：
     *   i686, ARM32, MIPS32, RISC-V32, PowerPC32
     *   以及任何我们没想到的 32 位环境
     */
#   define THIRTY_TWO_BIT
#endif

     /* ------------------- 可选：最终保险（推荐加上） ------------------- */
     /* 防止某些极端编译器同时定义了多个宏导致冲突 */
#if defined(SIXTY_FOUR_BIT) + defined(SIXTY_FOUR_BIT_LONG) + defined(THIRTY_TWO_BIT) != 1
#   error "Exactly one of THIRTY_TWO_BIT, SIXTY_FOUR_BIT, SIXTY_FOUR_BIT_LONG must be defined!"
#endif

#endif
